<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Test Audio Core ‚Äî Enregistrement + D√©tection Pitch (LISS√âE)</title>
<style>
:root{
  --bg:#0b1220;--panel:#0e1729;--card:#111a2e;--grid:#1a2642;
  --text:#e5e7eb;--muted:#9ca3af;--ok:#10b981;--err:#ef4444;--blue:#3b82f6;
}
*{box-sizing:border-box} html,body{height:100%;margin:0}
body{background:var(--bg);color:var(--text);font:14px/1.45 system-ui,Segoe UI,Roboto,Arial}
.wrap{max-width:1100px;margin:24px auto;padding:0 16px}
.h1{font-weight:800;font-size:20px;margin:0 0 16px}
.bar{display:flex;gap:8px;align-items:center;margin-bottom:12px;flex-wrap:wrap}
.btn{display:inline-flex;align-items:center;gap:8px;border:1px solid #1f2a44;background:var(--card);color:var(--text);border-radius:8px;padding:8px 12px;cursor:pointer;font-weight:600;font-size:13px}
.btn[disabled]{opacity:.45;cursor:not-allowed}
.badge{padding:6px 10px;border-radius:8px;border:1px solid #22304f;background:#0b1220;font-size:12px}
.badge.ok{color:#bbf7d0;border-color:#206a44;background:#052216}
.badge.err{color:#fecaca;border-color:#4a171f;background:#2a0f14}
.canvasWrap{border:1px solid #1f2a44;border-radius:10px;background:#0b1324;padding:6px}
canvas{display:block;width:100%;height:auto}
.log{background:#0b1020;border:1px solid #1f2a44;border-radius:8px;padding:12px;color:#dbeafe;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px;max-height:240px;overflow:auto;white-space:pre-wrap}
</style>
</head>
<body>
<div class="wrap">
  <div class="h1">üéµ Test Audio Core ‚Äî Enregistrement + D√©tection Pitch (LISS√âE)</div>
  <div class="bar">
    <button id="btnMic" class="btn">üé§ Activer micro</button>
    <button id="btnRec" class="btn" disabled>‚ñ∂ Enregistrer</button>
    <button id="btnStop" class="btn" disabled>‚èπ Stop</button>
    <span id="badge" class="badge">D√©tecteur: chargement‚Ä¶</span>
  </div>

  <div class="canvasWrap">
    <canvas id="cv" width="900" height="360"></canvas>
  </div>

  <h3>Logs</h3>
  <div id="log" class="log">D√©marrage‚Ä¶</div>
</div>

<!-- ‚ö†Ô∏è CHARGER depuis src/ (source unique), PAS depuis assets/ -->
<script src="./src/vendor/yin-detector.js"></script>
<script src="./src/utils/pitch-smoothing.js"></script>
<script src="./src/app.js"></script>
</body>
</html>
